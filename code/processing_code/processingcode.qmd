---
title: "Processing Code for September Data"
output: 
  html_document
---

# Processing 1

Load needed packages. make sure they are installed.

```{r}
library(here)
library(readxl) #for loading Excel files
library(dplyr) #for data processing/cleaning
library(tidyr) #for data processing/cleaning
```

## Raw Data & Codebook loading

```{r}
# Loading the rawdata containing GA residents with at least one dose of the Covid-19 vaccine
rawdata_location = here("data","raw_data","Sept_17.xlsx")
Sept_17 <- read_excel(rawdata_location)


#loading data code book for reference 
codebook_location = here("data","raw_data","Codebook.xlsx")
codebook = read_excel(codebook_location)
```

## Summary of data

```{r}
glimpse(Sept_17)
```

## Cleaning

### Separating the data by zip code and removing negative values

```{r}
#I am only interested in Covid-19 Vaccination from Dougherty County which contains the target zip codes of 31701, 31705 and 31707
#by using filter() I am able to create a new dataset with vaccinations from Dougherty County 
Dougherty_Vax_Sept <- filter(Sept_17, COUNTY_NAME == "Dougherty County")  

#replacing negative values with 0
Dougherty_Vax_Sept [Dougherty_Vax_Sept < 0] <- 0  
```

### Adding new columns: total vax sum, total vax of all males, total vax of all females

```{r}
#Adding a column of the total vax for each census tract (for each observation)  
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>% mutate(total_vax_Sept = sum(across(ends_with("VAX")), na.rm = T))  

#total vax column for all males
Dougherty_Vax_Sept <- Dougherty_Vax_Sept  %>% rowwise() %>%   
  mutate(total_male_vax = sum(across(starts_with("M") & ends_with("VAX")), na.rm = T)) 

#total vax column for all females
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>%   
  mutate(total_female_vax = sum(across(starts_with("F") & ends_with("VAX")), na.rm = T))

```

### Adding new columns for Male Residents by race

```{r}
#total vax column for Asian male residents 
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>%   
  mutate(total_masian_vax = sum(across(starts_with("MAsianNHPI") & ends_with("VAX")), na.rm = T))

#total vax column for African American male residents
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>%   
  mutate(total_mblack_vax = sum(across(starts_with("MBlack") & ends_with("VAX")), na.rm = T))

#total vax column for other race male residents
Dougherty_Vax_Sept<- Dougherty_Vax_Sept %>% rowwise() %>%   
  mutate(total_morace_vax = sum(across(starts_with("MOtherRace") & ends_with("VAX")), na.rm = T))  

#total vax column for White male residents 
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>%   
  mutate(total_mwhite_vax = sum(across(starts_with("MWhite") & ends_with("VAX")), na.rm = T))

```

### Adding new columns for Female Residents by race

```{r}
#total vax column for Asian female residents    
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>%   
  mutate(total_fasian_vax = sum(across(starts_with("FAsianNHPI") & ends_with("VAX")), na.rm = T))  

#total vax column for African American female residents
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>%   
  mutate(total_fblack_vax = sum(across(starts_with("FBlack") & ends_with("VAX")), na.rm = T))  

#total vax column for other race female residents
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>%   
  mutate(total_forace_vax = sum(across(starts_with("FOtherRace") & ends_with("VAX")), na.rm = T))  

#total vax column for White female residents 
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>%   
  mutate(total_fwhite_vax = sum(across(starts_with("FWhite") & ends_with("VAX")), na.rm = T))  
```

### Adding new columns for Vax totals by race

Note that these columns are different than the previous columns because here I am summing the total amount of resident vaccinations by adding all males and females of a specific race to get the the overall amount of resident vaccinations by race.

For example(see below): I get the total Asian resident vaccinations by summing male Asian residents + female Asain residents.

```{r}
#Vax total Asian Residents
Dougherty_Vax_Sept$total_asian_vax <- Dougherty_Vax_Sept$total_masian_vax + Dougherty_Vax_Sept$total_fasian_vax

#Vax total for African American Residents 
Dougherty_Vax_Sept$total_black_vax <- Dougherty_Vax_Sept$total_mblack_vax + Dougherty_Vax_Sept$total_fblack_vax  

#Vax total for Other Race Residents
Dougherty_Vax_Sept$total_orace_vax <- Dougherty_Vax_Sept$total_morace_vax + Dougherty_Vax_Sept$total_forace_vax  

#Vax total for White Residents
Dougherty_Vax_Sept$total_white_vax <- Dougherty_Vax_Sept$total_mwhite_vax + Dougherty_Vax_Sept$total_fwhite_vax  
```

### Adding new columns for Vax totals by age ranges: 05-09, 10-17, 18-44, 45-64, 65+

```{r}
#summing all residents in the age range of 05-09
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>% mutate(total_05_09_vax = sum(FAsianNHPI_05_09_VAX, MAsianNHPI_05_09_VAX, UAsianNHPI_05_09_VAX,FBlack_05_09_VAX, MBlack_05_09_VAX, UBlack_05_09_VAX,FNone_05_09_VAX, MNone_05_09_VAX, UNone_05_09_VAX,FOtherRace_05_09_VAX, MOtherRace_05_09_VAX, UOtherRace_05_09_VAX,FWhite_05_09_VAX, MWhite_05_09_VAX, UWhite_05_09_VAX, na.rm = T))  

#summing all residents in the age range of 10-17
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>% mutate(total_10_17_vax = sum(FAsianNHPI_10_17_VAX, MAsianNHPI_10_17_VAX, UAsianNHPI_10_17_VAX,FBlack_10_17_VAX, MBlack_10_17_VAX, UBlack_10_17_VAX,FNone_10_17_VAX, MNone_10_17_VAX, UNone_10_17_VAX,FOtherRace_10_17_VAX, MOtherRace_10_17_VAX, UOtherRace_10_17_VAX,FWhite_10_17_VAX, MWhite_10_17_VAX, UWhite_10_17_VAX, na.rm = T))  

#summing all residents in the age range of 18-44
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>% mutate(total_18_44_vax = sum(FAsianNHPI_18_44_VAX, MAsianNHPI_18_44_VAX, UAsianNHPI_18_44_VAX,FBlack_18_44_VAX, MBlack_18_44_VAX, UBlack_18_44_VAX,FNone_18_44_VAX, MNone_18_44_VAX, UNone_18_44_VAX,FOtherRace_18_44_VAX, MOtherRace_18_44_VAX, UOtherRace_18_44_VAX,FWhite_18_44_VAX, MWhite_18_44_VAX, UWhite_18_44_VAX, na.rm = T))  

#summing all residents in the age range of 45-64
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>% mutate(total_45_64_vax = sum(FAsianNHPI_45_64_VAX, MAsianNHPI_45_64_VAX, UAsianNHPI_45_64_VAX,FBlack_45_64_VAX, MBlack_45_64_VAX, UBlack_45_64_VAX,FNone_45_64_VAX, MNone_45_64_VAX, UNone_45_64_VAX,FOtherRace_45_64_VAX, MOtherRace_45_64_VAX, UOtherRace_45_64_VAX,FWhite_45_64_VAX, MWhite_45_64_VAX, UWhite_45_64_VAX, na.rm = T))  

#summing all residents in the age range of 65+ 
Dougherty_Vax_Sept <- Dougherty_Vax_Sept %>% rowwise() %>% mutate(total_65Plus_vax = sum(FAsianNHPI_65Plus_VAX, MAsianNHPI_65Plus_VAX, UAsianNHPI_65Plus_VAX,FBlack_65Plus_VAX, MBlack_65Plus_VAX, UBlack_65Plus_VAX,FNone_65Plus_VAX, MNone_65Plus_VAX, UNone_65Plus_VAX,FOtherRace_65Plus_VAX, MOtherRace_65Plus_VAX, UOtherRace_65Plus_VAX,FWhite_65Plus_VAX, MWhite_65Plus_VAX, UWhite_65Plus_VAX, na.rm = T))  

```

### Creating a data set with only the sums columns I just created via the previous code

```{r}
#Extract necessary variables only  
Dougherty_Vax_Sept_sums <- Dougherty_Vax_Sept[,c(1:4,185:204)]  
```

### Filtering the data by zip code and creating a

```{r}
#filtering data by zip: 31701  
#All of the following FIPS or census tracts correspond to the 31701 zip code
Zip_31701_Sept <-filter(Dougherty_Vax_Sept_sums,FIPS=="13095000700" | FIPS=="13095000800" | FIPS=="13095001403" | FIPS=="13095001500" | FIPS=="13095010601" | FIPS=="13095011300" | FIPS=="13095011400" | FIPS=="13095010602")  

#filtering data by zip: 31705  
#All of the following FIPS or census tracts correspond to the 31705 zip code
Zip_31705_Sept <- filter(Dougherty_Vax_Sept_sums, FIPS=="13095000100" | FIPS=="13095000200" | FIPS=="13095010302" | FIPS=="13095010700" | FIPS=="13095010900" | FIPS=="13095011000" | FIPS=="13095011200" | FIPS=="13095011600")  

#filtering data by zip: 31707  
#All of the following FIPS or census tracts correspond to the 31707 zip code
Zip_31707_Sept <- filter(Dougherty_Vax_Sept_sums, FIPS=="13095000400" | FIPS=="13095000501" | FIPS=="13095000502" | FIPS=="13095000600" | FIPS=="13095000900" | FIPS=="13095001000" | FIPS=="13095001100")  

```

### Change the column names for 31701 Sept

```{r}
colnames(Zip_31701_Sept) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Sept_17", "total_male_vax_Sept_17", "total_female_vax_Sept_17", "total_masian_vax_Sept_17", "total_mblack_vax_Sept_17", "total_morace_vax_Sept_17", "total_mwhite_vax_Sept_17", "total_fasian_vax_Sept_17", "total_fblack_vax_Sept_17", "total_forace_vax_Sept_17", "total_fwhite_vax_Sept_17", "total_asian_vax_Sept_17","total_black_vax_Sept_17", "total_orace_vax_Sept_17", "total_white_vax_Sept_17", "total_05_09_vax_Sept_17", "total_10_17_vax_Sept_17", "total_18_44_vax_Sept_17", "total_45_64_vax_Sept_17", "total_65Plus_vax_Sept_17") 

#change column names for 31705 Sept  
colnames(Zip_31705_Sept) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Sept_17", "total_male_vax_Sept_17", "total_female_vax_Sept_17", "total_masian_vax_Sept_17", "total_mblack_vax_Sept_17", "total_morace_vax_Sept_17", "total_mwhite_vax_Sept_17", "total_fasian_vax_Sept_17", "total_fblack_vax_Sept_17", "total_forace_vax_Sept_17", "total_fwhite_vax_Sept_17", "total_asian_vax_Sept_17","total_black_vax_Sept_17", "total_orace_vax_Sept_17", "total_white_vax_Sept_17", "total_05_09_vax_Sept_17", "total_10_17_vax_Sept_17", "total_18_44_vax_Sept_17", "total_45_64_vax_Sept_17", "total_65Plus_vax_Sept_17") 

#change column names for 31707 Sept  
colnames(Zip_31707_Sept) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Sept_17", "total_male_vax_Sept_17", "total_female_vax_Sept_17", "total_masian_vax_Sept_17", "total_mblack_vax_Sept_17", "total_morace_vax_Sept_17", "total_mwhite_vax_Sept_17", "total_fasian_vax_Sept_17", "total_fblack_vax_Sept_17", "total_forace_vax_Sept_17", "total_fwhite_vax_Sept_17", "total_asian_vax_Sept_17","total_black_vax_Sept_17", "total_orace_vax_Sept_17", "total_white_vax_Sept_17", "total_05_09_vax_Sept_17", "total_10_17_vax_Sept_17", "total_18_44_vax_Sept_17", "total_45_64_vax_Sept_17", "total_65Plus_vax_Sept_17") 

```

### Deleting excess environment objects and saving data as processed_data_sept
```{r}
#Only need to save processed data for the three zip codes
rm(Dougherty_Vax_Sept,Sept_17, codebook, Dougherty_Vax_Sept_sums) 

#saving clean data for 31701 to processed_data folder
save_data_location = here("data", "processed_data", "Zip_31701", "processed_data_31701_Sept.rds")

saveRDS(Zip_31701_Sept, file = save_data_location)

#saving clean data for 31705 to processed_data folder
save_data_location2 = here("data", "processed_data", "Zip_31705", "processed_data_31705_Sept.rds")

saveRDS(Zip_31705_Sept, file = save_data_location2)

#saving clean data for 31707 to processed_data folder
save_data_location3 = here("data", "processed_data", "Zip_31707", "processed_data_31707_Sept.rds")

saveRDS(Zip_31707_Sept, file = save_data_location3)

```


# Processing 2

Load needed packages. make sure they are installed.

```{r}
library(here)
library(readxl) #for loading Excel files
library(dplyr) #for data processing/cleaning
library(tidyr) #for data processing/cleaning
```

## Raw Data & Codebook loading

```{r}
# Loading the rawdata containing GA residents with at least one dose of the Covid-19 vaccine
rawdata_location = here("data","raw_data","Oct_28.xlsx")
Oct_28 <- read_excel(rawdata_location)


#loading data code book for reference 
codebook_location = here("data","raw_data","Codebook.xlsx")
codebook = read_excel(codebook_location)
```

## Summary of data

```{r}
glimpse(Oct_28)
```

## Cleaning

### Separating the data by zip code and removing negative values

```{r}
#I am only interested in Covid-19 Vaccination from Dougherty County which contains the target zip codes of 31701, 31705 and 31707
#by using filter() I am able to create a new dataset with vaccinations from Dougherty County 
Dougherty_Vax_Oct <- filter(Oct_28, COUNTY_NAME == "Dougherty County")  

#replacing negative values with 0
Dougherty_Vax_Oct [Dougherty_Vax_Oct < 0] <- 0  
```

### Adding new columns: total vax sum, total vax of all males, total vax of all females

```{r}
#Adding a column of the total vax for each census tract (for each observation)  
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>% mutate(total_vax_Oct = sum(across(ends_with("VAX")), na.rm = T))  

#total vax column for all males
Dougherty_Vax_Oct <- Dougherty_Vax_Oct  %>% rowwise() %>%   
  mutate(total_male_vax = sum(across(starts_with("M") & ends_with("VAX")), na.rm = T)) 

#total vax column for all females
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>%   
  mutate(total_female_vax = sum(across(starts_with("F") & ends_with("VAX")), na.rm = T))

```

### Adding new columns for Male Residents by race

```{r}
#total vax column for Asian male residents 
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>%   
  mutate(total_masian_vax = sum(across(starts_with("MAsianNHPI") & ends_with("VAX")), na.rm = T))

#total vax column for African American male residents
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>%   
  mutate(total_mblack_vax = sum(across(starts_with("MBlack") & ends_with("VAX")), na.rm = T))

#total vax column for other race male residents
Dougherty_Vax_Oct<- Dougherty_Vax_Oct %>% rowwise() %>%   
  mutate(total_morace_vax = sum(across(starts_with("MOtherRace") & ends_with("VAX")), na.rm = T))  

#total vax column for White male residents 
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>%   
  mutate(total_mwhite_vax = sum(across(starts_with("MWhite") & ends_with("VAX")), na.rm = T))

```

### Adding new columns for Female Residents by race

```{r}
#total vax column for Asian female residents    
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>%   
  mutate(total_fasian_vax = sum(across(starts_with("FAsianNHPI") & ends_with("VAX")), na.rm = T))  

#total vax column for African American female residents
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>%   
  mutate(total_fblack_vax = sum(across(starts_with("FBlack") & ends_with("VAX")), na.rm = T))  

#total vax column for other race female residents
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>%   
  mutate(total_forace_vax = sum(across(starts_with("FOtherRace") & ends_with("VAX")), na.rm = T))  

#total vax column for White female residents 
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>%   
  mutate(total_fwhite_vax = sum(across(starts_with("FWhite") & ends_with("VAX")), na.rm = T))  
```

### Adding new columns for Vax totals by race

Note that these columns are different than the previous columns because here I am summing the total amount of resident vaccinations by adding all males and females of a specific race to get the the overall amount of resident vaccinations by race.

For example(see below): I get the total Asian resident vaccinations by summing male Asian residents + female Asain residents.

```{r}
#Vax total Asian Residents
Dougherty_Vax_Oct$total_asian_vax <- Dougherty_Vax_Oct$total_masian_vax + Dougherty_Vax_Oct$total_fasian_vax

#Vax total for African American Residents 
Dougherty_Vax_Oct$total_black_vax <- Dougherty_Vax_Oct$total_mblack_vax + Dougherty_Vax_Oct$total_fblack_vax  

#Vax total for Other Race Residents
Dougherty_Vax_Oct$total_orace_vax <- Dougherty_Vax_Oct$total_morace_vax + Dougherty_Vax_Oct$total_forace_vax  

#Vax total for White Residents
Dougherty_Vax_Oct$total_white_vax <- Dougherty_Vax_Oct$total_mwhite_vax + Dougherty_Vax_Oct$total_fwhite_vax  
```

### Adding new columns for Vax totals by age ranges: 05-09, 10-17, 18-44, 45-64, 65+

```{r}
#summing all residents in the age range of 05-09
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>% mutate(total_05_09_vax = sum(FAsianNHPI_05_09_VAX, MAsianNHPI_05_09_VAX, UAsianNHPI_05_09_VAX,FBlack_05_09_VAX, MBlack_05_09_VAX, UBlack_05_09_VAX,FNone_05_09_VAX, MNone_05_09_VAX, UNone_05_09_VAX,FOtherRace_05_09_VAX, MOtherRace_05_09_VAX, UOtherRace_05_09_VAX,FWhite_05_09_VAX, MWhite_05_09_VAX, UWhite_05_09_VAX, na.rm = T))  

#summing all residents in the age range of 10-17
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>% mutate(total_10_17_vax = sum(FAsianNHPI_10_17_VAX, MAsianNHPI_10_17_VAX, UAsianNHPI_10_17_VAX,FBlack_10_17_VAX, MBlack_10_17_VAX, UBlack_10_17_VAX,FNone_10_17_VAX, MNone_10_17_VAX, UNone_10_17_VAX,FOtherRace_10_17_VAX, MOtherRace_10_17_VAX, UOtherRace_10_17_VAX,FWhite_10_17_VAX, MWhite_10_17_VAX, UWhite_10_17_VAX, na.rm = T))  

#summing all residents in the age range of 18-44
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>% mutate(total_18_44_vax = sum(FAsianNHPI_18_44_VAX, MAsianNHPI_18_44_VAX, UAsianNHPI_18_44_VAX,FBlack_18_44_VAX, MBlack_18_44_VAX, UBlack_18_44_VAX,FNone_18_44_VAX, MNone_18_44_VAX, UNone_18_44_VAX,FOtherRace_18_44_VAX, MOtherRace_18_44_VAX, UOtherRace_18_44_VAX,FWhite_18_44_VAX, MWhite_18_44_VAX, UWhite_18_44_VAX, na.rm = T))  

#summing all residents in the age range of 45-64
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>% mutate(total_45_64_vax = sum(FAsianNHPI_45_64_VAX, MAsianNHPI_45_64_VAX, UAsianNHPI_45_64_VAX,FBlack_45_64_VAX, MBlack_45_64_VAX, UBlack_45_64_VAX,FNone_45_64_VAX, MNone_45_64_VAX, UNone_45_64_VAX,FOtherRace_45_64_VAX, MOtherRace_45_64_VAX, UOtherRace_45_64_VAX,FWhite_45_64_VAX, MWhite_45_64_VAX, UWhite_45_64_VAX, na.rm = T))  

#summing all residents in the age range of 65+ 
Dougherty_Vax_Oct <- Dougherty_Vax_Oct %>% rowwise() %>% mutate(total_65Plus_vax = sum(FAsianNHPI_65Plus_VAX, MAsianNHPI_65Plus_VAX, UAsianNHPI_65Plus_VAX,FBlack_65Plus_VAX, MBlack_65Plus_VAX, UBlack_65Plus_VAX,FNone_65Plus_VAX, MNone_65Plus_VAX, UNone_65Plus_VAX,FOtherRace_65Plus_VAX, MOtherRace_65Plus_VAX, UOtherRace_65Plus_VAX,FWhite_65Plus_VAX, MWhite_65Plus_VAX, UWhite_65Plus_VAX, na.rm = T))  

```

### Creating a data set with only the sums columns I just created via the previous code

```{r}
#Extract necessary variables only  
Dougherty_Vax_Oct_sums <- Dougherty_Vax_Oct[,c(1:4,185:204)]  
```

### Filtering the data by zip code and creating a

```{r}
#filtering data by zip: 31701  
#All of the following FIPS or census tracts correspond to the 31701 zip code
Zip_31701_Oct <-filter(Dougherty_Vax_Oct_sums,FIPS=="13095000700" | FIPS=="13095000800" | FIPS=="13095001403" | FIPS=="13095001500" | FIPS=="13095010601" | FIPS=="13095011300" | FIPS=="13095011400" | FIPS=="13095010602")  

#filtering data by zip: 31705  
#All of the following FIPS or census tracts correspond to the 31705 zip code
Zip_31705_Oct <- filter(Dougherty_Vax_Oct_sums, FIPS=="13095000100" | FIPS=="13095000200" | FIPS=="13095010302" | FIPS=="13095010700" | FIPS=="13095010900" | FIPS=="13095011000" | FIPS=="13095011200" | FIPS=="13095011600")  

#filtering data by zip: 31707  
#All of the following FIPS or census tracts correspond to the 31707 zip code
Zip_31707_Oct <- filter(Dougherty_Vax_Oct_sums, FIPS=="13095000400" | FIPS=="13095000501" | FIPS=="13095000502" | FIPS=="13095000600" | FIPS=="13095000900" | FIPS=="13095001000" | FIPS=="13095001100")  

```

### Change the column names for 31701 Oct

```{r}
colnames(Zip_31701_Oct) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Oct_28", "total_male_vax_Oct_28", "total_female_vax_Oct_28", "total_masian_vax_Oct_28", "total_mblack_vax_Oct_28", "total_morace_vax_Oct_28", "total_mwhite_vax_Oct_28", "total_fasian_vax_Oct_28", "total_fblack_vax_Oct_28", "total_forace_vax_Oct_28", "total_fwhite_vax_Oct_28", "total_asian_vax_Oct_28","total_black_vax_Oct_28", "total_orace_vax_Oct_28", "total_white_vax_Oct_28", "total_05_09_vax_Oct_28", "total_10_17_vax_Oct_28", "total_18_44_vax_Oct_28", "total_45_64_vax_Oct_28", "total_65Plus_vax_Oct_28") 

#change column names for 31705 Oct  
colnames(Zip_31705_Oct) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Oct_28", "total_male_vax_Oct_28", "total_female_vax_Oct_28", "total_masian_vax_Oct_28", "total_mblack_vax_Oct_28", "total_morace_vax_Oct_28", "total_mwhite_vax_Oct_28", "total_fasian_vax_Oct_28", "total_fblack_vax_Oct_28", "total_forace_vax_Oct_28", "total_fwhite_vax_Oct_28", "total_asian_vax_Oct_28","total_black_vax_Oct_28", "total_orace_vax_Oct_28", "total_white_vax_Oct_28", "total_05_09_vax_Oct_28", "total_10_17_vax_Oct_28", "total_18_44_vax_Oct_28", "total_45_64_vax_Oct_28", "total_65Plus_vax_Oct_28") 

#change column names for 31707 Oct  
colnames(Zip_31707_Oct) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Oct_28", "total_male_vax_Oct_28", "total_female_vax_Oct_28", "total_masian_vax_Oct_28", "total_mblack_vax_Oct_28", "total_morace_vax_Oct_28", "total_mwhite_vax_Oct_28", "total_fasian_vax_Oct_28", "total_fblack_vax_Oct_28", "total_forace_vax_Oct_28", "total_fwhite_vax_Oct_28", "total_asian_vax_Oct_28","total_black_vax_Oct_28", "total_orace_vax_Oct_28", "total_white_vax_Oct_28", "total_05_09_vax_Oct_28", "total_10_17_vax_Oct_28", "total_18_44_vax_Oct_28", "total_45_64_vax_Oct_28", "total_65Plus_vax_Oct_28") 

```

# Cleaning is done, now lets save the processed data

### Deleting excess environment objects and saving data as processed_data_Oct

```{r}
#Only need to save processed data for the three zip codes
rm(Dougherty_Vax_Oct,Oct_28, codebook, Dougherty_Vax_Oct_sums) 

#saving clean data for 31701 to processed_data folder
save_data_location = here("data", "processed_data","Zip_31701", "processed_data_31701_Oct.rds")

saveRDS(Zip_31701_Oct, file = save_data_location)

#saving clean data for 31705 to processed_data folder
save_data_location2 = here("data", "processed_data", "Zip_31705", "processed_data_31705_Oct.rds")

saveRDS(Zip_31705_Oct, file = save_data_location2)

#saving clean data for 31707 to processed_data folder
save_data_location3 = here("data", "processed_data", "Zip_31707", "processed_data_31707_Oct.rds")

saveRDS(Zip_31707_Oct, file = save_data_location3)

```

# Processing 3

Load needed packages. make sure they are installed.

```{r}
library(here)
library(readxl) #for loading Excel files
library(dplyr) #for data processing/cleaning
library(tidyr) #for data processing/cleaning
```

## Raw Data & Codebook loading

```{r}
# Loading the rawdata containing GA residents with at least one dose of the Covid-19 vaccine
rawdata_location = here("data","raw_data","Nov_24.xlsx")
Nov_24 <- read_excel(rawdata_location)


#loading data code book for reference 
codebook_location = here("data","raw_data","Codebook.xlsx")
codebook = read_excel(codebook_location)
```

## Summary of data

```{r}
glimpse(Nov_24)
```

## Cleaning

### Separating the data by zip code and removing negative values

```{r}
#I am only interested in Covid-19 Vaccination from Dougherty County which contains the target zip codes of 31701, 31705 and 31707
#by using filter() I am able to create a new dataset with vaccinations from Dougherty County 
Dougherty_Vax_Nov <- filter(Nov_24, COUNTY_NAME == "Dougherty County")  

#replacing negative values with 0
Dougherty_Vax_Nov [Dougherty_Vax_Nov < 0] <- 0  
```

### Adding new columns: total vax sum, total vax of all males, total vax of all females

```{r}
#Adding a column of the total vax for each census tract (for each observation)  
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>% mutate(total_vax_Nov = sum(across(ends_with("VAX")), na.rm = T))  

#total vax column for all males
Dougherty_Vax_Nov <- Dougherty_Vax_Nov  %>% rowwise() %>%   
  mutate(total_male_vax = sum(across(starts_with("M") & ends_with("VAX")), na.rm = T)) 

#total vax column for all females
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>%   
  mutate(total_female_vax = sum(across(starts_with("F") & ends_with("VAX")), na.rm = T))

```

### Adding new columns for Male Residents by race

```{r}
#total vax column for Asian male residents 
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>%   
  mutate(total_masian_vax = sum(across(starts_with("MAsianNHPI") & ends_with("VAX")), na.rm = T))

#total vax column for African American male residents
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>%   
  mutate(total_mblack_vax = sum(across(starts_with("MBlack") & ends_with("VAX")), na.rm = T))

#total vax column for other race male residents
Dougherty_Vax_Nov<- Dougherty_Vax_Nov %>% rowwise() %>%   
  mutate(total_morace_vax = sum(across(starts_with("MOtherRace") & ends_with("VAX")), na.rm = T))  

#total vax column for White male residents 
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>%   
  mutate(total_mwhite_vax = sum(across(starts_with("MWhite") & ends_with("VAX")), na.rm = T))

```

### Adding new columns for Female Residents by race

```{r}
#total vax column for Asian female residents    
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>%   
  mutate(total_fasian_vax = sum(across(starts_with("FAsianNHPI") & ends_with("VAX")), na.rm = T))  

#total vax column for African American female residents
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>%   
  mutate(total_fblack_vax = sum(across(starts_with("FBlack") & ends_with("VAX")), na.rm = T))  

#total vax column for other race female residents
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>%   
  mutate(total_forace_vax = sum(across(starts_with("FOtherRace") & ends_with("VAX")), na.rm = T))  

#total vax column for White female residents 
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>%   
  mutate(total_fwhite_vax = sum(across(starts_with("FWhite") & ends_with("VAX")), na.rm = T))  
```

### Adding new columns for Vax totals by race

Note that these columns are different than the previous columns because here I am summing the total amount of resident vaccinations by adding all males and females of a specific race to get the the overall amount of resident vaccinations by race.

For example(see below): I get the total Asian resident vaccinations by summing male Asian residents + female Asain residents.

```{r}
#Vax total Asian Residents
Dougherty_Vax_Nov$total_asian_vax <- Dougherty_Vax_Nov$total_masian_vax + Dougherty_Vax_Nov$total_fasian_vax

#Vax total for African American Residents 
Dougherty_Vax_Nov$total_black_vax <- Dougherty_Vax_Nov$total_mblack_vax + Dougherty_Vax_Nov$total_fblack_vax  

#Vax total for Other Race Residents
Dougherty_Vax_Nov$total_orace_vax <- Dougherty_Vax_Nov$total_morace_vax + Dougherty_Vax_Nov$total_forace_vax  

#Vax total for White Residents
Dougherty_Vax_Nov$total_white_vax <- Dougherty_Vax_Nov$total_mwhite_vax + Dougherty_Vax_Nov$total_fwhite_vax  
```

### Adding new columns for Vax totals by age ranges: 05-09, 10-17, 18-44, 45-64, 65+

```{r}
#summing all residents in the age range of 05-09
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>% mutate(total_05_09_vax = sum(FAsianNHPI_05_09_VAX, MAsianNHPI_05_09_VAX, UAsianNHPI_05_09_VAX,FBlack_05_09_VAX, MBlack_05_09_VAX, UBlack_05_09_VAX,FNone_05_09_VAX, MNone_05_09_VAX, UNone_05_09_VAX,FOtherRace_05_09_VAX, MOtherRace_05_09_VAX, UOtherRace_05_09_VAX,FWhite_05_09_VAX, MWhite_05_09_VAX, UWhite_05_09_VAX, na.rm = T))  

#summing all residents in the age range of 10-17
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>% mutate(total_10_17_vax = sum(FAsianNHPI_10_17_VAX, MAsianNHPI_10_17_VAX, UAsianNHPI_10_17_VAX,FBlack_10_17_VAX, MBlack_10_17_VAX, UBlack_10_17_VAX,FNone_10_17_VAX, MNone_10_17_VAX, UNone_10_17_VAX,FOtherRace_10_17_VAX, MOtherRace_10_17_VAX, UOtherRace_10_17_VAX,FWhite_10_17_VAX, MWhite_10_17_VAX, UWhite_10_17_VAX, na.rm = T))  

#summing all residents in the age range of 18-44
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>% mutate(total_18_44_vax = sum(FAsianNHPI_18_44_VAX, MAsianNHPI_18_44_VAX, UAsianNHPI_18_44_VAX,FBlack_18_44_VAX, MBlack_18_44_VAX, UBlack_18_44_VAX,FNone_18_44_VAX, MNone_18_44_VAX, UNone_18_44_VAX,FOtherRace_18_44_VAX, MOtherRace_18_44_VAX, UOtherRace_18_44_VAX,FWhite_18_44_VAX, MWhite_18_44_VAX, UWhite_18_44_VAX, na.rm = T))  

#summing all residents in the age range of 45-64
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>% mutate(total_45_64_vax = sum(FAsianNHPI_45_64_VAX, MAsianNHPI_45_64_VAX, UAsianNHPI_45_64_VAX,FBlack_45_64_VAX, MBlack_45_64_VAX, UBlack_45_64_VAX,FNone_45_64_VAX, MNone_45_64_VAX, UNone_45_64_VAX,FOtherRace_45_64_VAX, MOtherRace_45_64_VAX, UOtherRace_45_64_VAX,FWhite_45_64_VAX, MWhite_45_64_VAX, UWhite_45_64_VAX, na.rm = T))  

#summing all residents in the age range of 65+ 
Dougherty_Vax_Nov <- Dougherty_Vax_Nov %>% rowwise() %>% mutate(total_65Plus_vax = sum(FAsianNHPI_65Plus_VAX, MAsianNHPI_65Plus_VAX, UAsianNHPI_65Plus_VAX,FBlack_65Plus_VAX, MBlack_65Plus_VAX, UBlack_65Plus_VAX,FNone_65Plus_VAX, MNone_65Plus_VAX, UNone_65Plus_VAX,FOtherRace_65Plus_VAX, MOtherRace_65Plus_VAX, UOtherRace_65Plus_VAX,FWhite_65Plus_VAX, MWhite_65Plus_VAX, UWhite_65Plus_VAX, na.rm = T))  

```

### Creating a data set with only the sums columns I just created via the previous code

```{r}
#Extract necessary variables only  
Dougherty_Vax_Nov_sums <- Dougherty_Vax_Nov[,c(1:4,185:204)]  
```

### Filtering the data by zip code and creating a

```{r}
#filtering data by zip: 31701  
#All of the following FIPS or census tracts correspond to the 31701 zip code
Zip_31701_Nov <-filter(Dougherty_Vax_Nov_sums,FIPS=="13095000700" | FIPS=="13095000800" | FIPS=="13095001403" | FIPS=="13095001500" | FIPS=="13095010601" | FIPS=="13095011300" | FIPS=="13095011400" | FIPS=="13095010602")  

#filtering data by zip: 31705  
#All of the following FIPS or census tracts correspond to the 31705 zip code
Zip_31705_Nov <- filter(Dougherty_Vax_Nov_sums, FIPS=="13095000100" | FIPS=="13095000200" | FIPS=="13095010302" | FIPS=="13095010700" | FIPS=="13095010900" | FIPS=="13095011000" | FIPS=="13095011200" | FIPS=="13095011600")  

#filtering data by zip: 31707  
#All of the following FIPS or census tracts correspond to the 31707 zip code
Zip_31707_Nov <- filter(Dougherty_Vax_Nov_sums, FIPS=="13095000400" | FIPS=="13095000501" | FIPS=="13095000502" | FIPS=="13095000600" | FIPS=="13095000900" | FIPS=="13095001000" | FIPS=="13095001100")  

```

### Change the column names for 31701 Nov

```{r}
colnames(Zip_31701_Nov) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Nov_24", "total_male_vax_Nov_24", "total_female_vax_Nov_24", "total_masian_vax_Nov_24", "total_mblack_vax_Nov_24", "total_morace_vax_Nov_24", "total_mwhite_vax_Nov_24", "total_fasian_vax_Nov_24", "total_fblack_vax_Nov_24", "total_forace_vax_Nov_24", "total_fwhite_vax_Nov_24", "total_asian_vax_Nov_24","total_black_vax_Nov_24", "total_orace_vax_Nov_24", "total_white_vax_Nov_24", "total_05_09_vax_Nov_24", "total_10_17_vax_Nov_24", "total_18_44_vax_Nov_24", "total_45_64_vax_Nov_24", "total_65Plus_vax_Nov_24") 

#change column names for 31705 Nov  
colnames(Zip_31705_Nov) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Nov_24", "total_male_vax_Nov_24", "total_female_vax_Nov_24", "total_masian_vax_Nov_24", "total_mblack_vax_Nov_24", "total_morace_vax_Nov_24", "total_mwhite_vax_Nov_24", "total_fasian_vax_Nov_24", "total_fblack_vax_Nov_24", "total_forace_vax_Nov_24", "total_fwhite_vax_Nov_24", "total_asian_vax_Nov_24","total_black_vax_Nov_24", "total_orace_vax_Nov_24", "total_white_vax_Nov_24", "total_05_09_vax_Nov_24", "total_10_17_vax_Nov_24", "total_18_44_vax_Nov_24", "total_45_64_vax_Nov_24", "total_65Plus_vax_Nov_24") 

#change column names for 31707 Nov  
colnames(Zip_31707_Nov) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Nov_24", "total_male_vax_Nov_24", "total_female_vax_Nov_24", "total_masian_vax_Nov_24", "total_mblack_vax_Nov_24", "total_morace_vax_Nov_24", "total_mwhite_vax_Nov_24", "total_fasian_vax_Nov_24", "total_fblack_vax_Nov_24", "total_forace_vax_Nov_24", "total_fwhite_vax_Nov_24", "total_asian_vax_Nov_24","total_black_vax_Nov_24", "total_orace_vax_Nov_24", "total_white_vax_Nov_24", "total_05_09_vax_Nov_24", "total_10_17_vax_Nov_24", "total_18_44_vax_Nov_24", "total_45_64_vax_Nov_24", "total_65Plus_vax_Nov_24") 

```

# Cleaning is done, now lets save the processed data

### Deleting excess environment objects and saving data as processed_data_Nov

```{r}
#Only need to save processed data for the three zip codes
rm(Dougherty_Vax_Nov,Nov_24, codebook, Dougherty_Vax_Nov_sums) 

#saving clean data for 31701 to processed_data folder
save_data_location = here("data", "processed_data","Zip_31701", "processed_data_31701_Nov.rds")

saveRDS(Zip_31701_Nov, file = save_data_location)

#saving clean data for 31705 to processed_data folder
save_data_location2 = here("data", "processed_data", "Zip_31705", "processed_data_31705_Nov.rds")

saveRDS(Zip_31705_Nov, file = save_data_location2)

#saving clean data for 31707 to processed_data folder
save_data_location3 = here("data", "processed_data", "Zip_31707", "processed_data_31707_Nov.rds")

saveRDS(Zip_31707_Nov, file = save_data_location3)

```


# Processing 4

Load needed packages. make sure they are installed.

```{r}
library(here)
library(readxl) #for loading Excel files
library(dplyr) #for data processing/cleaning
library(tidyr) #for data processing/cleaning
```

## Raw Data & Codebook loading

```{r}
# Loading the rawdata containing GA residents with at least one dose of the Covid-19 vaccine
rawdata_location = here("data","raw_data","Dec_29.xlsx")
Dec_29 <- read_excel(rawdata_location)


#loading data code book for reference 
codebook_location = here("data","raw_data","Codebook.xlsx")
codebook = read_excel(codebook_location)
```

## Summary of data

```{r}
glimpse(Dec_29)
```

## Cleaning

### Separating the data by zip code and removing negative values

```{r}
#I am only interested in Covid-19 Vaccination from Dougherty County which contains the target zip codes of 31701, 31705 and 31707
#by using filter() I am able to create a new dataset with vaccinations from Dougherty County 
Dougherty_Vax_Dec <- filter(Dec_29, COUNTY_NAME == "Dougherty County")  

#replacing negative values with 0
Dougherty_Vax_Dec [Dougherty_Vax_Dec < 0] <- 0  
```

### Adding new columns: total vax sum, total vax of all males, total vax of all females

```{r}
#Adding a column of the total vax for each census tract (for each observation)  
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>% mutate(total_vax_Dec = sum(across(ends_with("VAX")), na.rm = T))  

#total vax column for all males
Dougherty_Vax_Dec <- Dougherty_Vax_Dec  %>% rowwise() %>%   
  mutate(total_male_vax = sum(across(starts_with("M") & ends_with("VAX")), na.rm = T)) 

#total vax column for all females
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>%   
  mutate(total_female_vax = sum(across(starts_with("F") & ends_with("VAX")), na.rm = T))

```

### Adding new columns for Male Residents by race

```{r}
#total vax column for Asian male residents 
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>%   
  mutate(total_masian_vax = sum(across(starts_with("MAsianNHPI") & ends_with("VAX")), na.rm = T))

#total vax column for African American male residents
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>%   
  mutate(total_mblack_vax = sum(across(starts_with("MBlack") & ends_with("VAX")), na.rm = T))

#total vax column for other race male residents
Dougherty_Vax_Dec<- Dougherty_Vax_Dec %>% rowwise() %>%   
  mutate(total_morace_vax = sum(across(starts_with("MOtherRace") & ends_with("VAX")), na.rm = T))  

#total vax column for White male residents 
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>%   
  mutate(total_mwhite_vax = sum(across(starts_with("MWhite") & ends_with("VAX")), na.rm = T))

```

### Adding new columns for Female Residents by race

```{r}
#total vax column for Asian female residents    
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>%   
  mutate(total_fasian_vax = sum(across(starts_with("FAsianNHPI") & ends_with("VAX")), na.rm = T))  

#total vax column for African American female residents
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>%   
  mutate(total_fblack_vax = sum(across(starts_with("FBlack") & ends_with("VAX")), na.rm = T))  

#total vax column for other race female residents
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>%   
  mutate(total_forace_vax = sum(across(starts_with("FOtherRace") & ends_with("VAX")), na.rm = T))  

#total vax column for White female residents 
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>%   
  mutate(total_fwhite_vax = sum(across(starts_with("FWhite") & ends_with("VAX")), na.rm = T))  
```

### Adding new columns for Vax totals by race

Note that these columns are different than the previous columns because here I am summing the total amount of resident vaccinations by adding all males and females of a specific race to get the the overall amount of resident vaccinations by race.

For example(see below): I get the total Asian resident vaccinations by summing male Asian residents + female Asain residents.

```{r}
#Vax total Asian Residents
Dougherty_Vax_Dec$total_asian_vax <- Dougherty_Vax_Dec$total_masian_vax + Dougherty_Vax_Dec$total_fasian_vax

#Vax total for African American Residents 
Dougherty_Vax_Dec$total_black_vax <- Dougherty_Vax_Dec$total_mblack_vax + Dougherty_Vax_Dec$total_fblack_vax  

#Vax total for Other Race Residents
Dougherty_Vax_Dec$total_orace_vax <- Dougherty_Vax_Dec$total_morace_vax + Dougherty_Vax_Dec$total_forace_vax  

#Vax total for White Residents
Dougherty_Vax_Dec$total_white_vax <- Dougherty_Vax_Dec$total_mwhite_vax + Dougherty_Vax_Dec$total_fwhite_vax  
```

### Adding new columns for Vax totals by age ranges: 05-09, 10-17, 18-44, 45-64, 65+

```{r}
#summing all residents in the age range of 05-09
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>% mutate(total_05_09_vax = sum(FAsianNHPI_05_09_VAX, MAsianNHPI_05_09_VAX, UAsianNHPI_05_09_VAX,FBlack_05_09_VAX, MBlack_05_09_VAX, UBlack_05_09_VAX,FNone_05_09_VAX, MNone_05_09_VAX, UNone_05_09_VAX,FOtherRace_05_09_VAX, MOtherRace_05_09_VAX, UOtherRace_05_09_VAX,FWhite_05_09_VAX, MWhite_05_09_VAX, UWhite_05_09_VAX, na.rm = T))  

#summing all residents in the age range of 10-17
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>% mutate(total_10_17_vax = sum(FAsianNHPI_10_17_VAX, MAsianNHPI_10_17_VAX, UAsianNHPI_10_17_VAX,FBlack_10_17_VAX, MBlack_10_17_VAX, UBlack_10_17_VAX,FNone_10_17_VAX, MNone_10_17_VAX, UNone_10_17_VAX,FOtherRace_10_17_VAX, MOtherRace_10_17_VAX, UOtherRace_10_17_VAX,FWhite_10_17_VAX, MWhite_10_17_VAX, UWhite_10_17_VAX, na.rm = T))  

#summing all residents in the age range of 18-44
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>% mutate(total_18_44_vax = sum(FAsianNHPI_18_44_VAX, MAsianNHPI_18_44_VAX, UAsianNHPI_18_44_VAX,FBlack_18_44_VAX, MBlack_18_44_VAX, UBlack_18_44_VAX,FNone_18_44_VAX, MNone_18_44_VAX, UNone_18_44_VAX,FOtherRace_18_44_VAX, MOtherRace_18_44_VAX, UOtherRace_18_44_VAX,FWhite_18_44_VAX, MWhite_18_44_VAX, UWhite_18_44_VAX, na.rm = T))  

#summing all residents in the age range of 45-64
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>% mutate(total_45_64_vax = sum(FAsianNHPI_45_64_VAX, MAsianNHPI_45_64_VAX, UAsianNHPI_45_64_VAX,FBlack_45_64_VAX, MBlack_45_64_VAX, UBlack_45_64_VAX,FNone_45_64_VAX, MNone_45_64_VAX, UNone_45_64_VAX,FOtherRace_45_64_VAX, MOtherRace_45_64_VAX, UOtherRace_45_64_VAX,FWhite_45_64_VAX, MWhite_45_64_VAX, UWhite_45_64_VAX, na.rm = T))  

#summing all residents in the age range of 65+ 
Dougherty_Vax_Dec <- Dougherty_Vax_Dec %>% rowwise() %>% mutate(total_65Plus_vax = sum(FAsianNHPI_65Plus_VAX, MAsianNHPI_65Plus_VAX, UAsianNHPI_65Plus_VAX,FBlack_65Plus_VAX, MBlack_65Plus_VAX, UBlack_65Plus_VAX,FNone_65Plus_VAX, MNone_65Plus_VAX, UNone_65Plus_VAX,FOtherRace_65Plus_VAX, MOtherRace_65Plus_VAX, UOtherRace_65Plus_VAX,FWhite_65Plus_VAX, MWhite_65Plus_VAX, UWhite_65Plus_VAX, na.rm = T))  

```

### Creating a data set with only the sums columns I just created via the previous code

```{r}
#Extract necessary variables only  
Dougherty_Vax_Dec_sums <- Dougherty_Vax_Dec[,c(1:4,185:204)]  
```

### Filtering the data by zip code and creating a

```{r}
#filtering data by zip: 31701  
#All of the following FIPS or census tracts correspond to the 31701 zip code
Zip_31701_Dec <-filter(Dougherty_Vax_Dec_sums,FIPS=="13095000700" | FIPS=="13095000800" | FIPS=="13095001403" | FIPS=="13095001500" | FIPS=="13095010601" | FIPS=="13095011300" | FIPS=="13095011400" | FIPS=="13095010602")  

#filtering data by zip: 31705  
#All of the following FIPS or census tracts correspond to the 31705 zip code
Zip_31705_Dec <- filter(Dougherty_Vax_Dec_sums, FIPS=="13095000100" | FIPS=="13095000200" | FIPS=="13095010302" | FIPS=="13095010700" | FIPS=="13095010900" | FIPS=="13095011000" | FIPS=="13095011200" | FIPS=="13095011600")  

#filtering data by zip: 31707  
#All of the following FIPS or census tracts correspond to the 31707 zip code
Zip_31707_Dec <- filter(Dougherty_Vax_Dec_sums, FIPS=="13095000400" | FIPS=="13095000501" | FIPS=="13095000502" | FIPS=="13095000600" | FIPS=="13095000900" | FIPS=="13095001000" | FIPS=="13095001100")  

```

### Change the column names for 31701 Dec

```{r}
colnames(Zip_31701_Dec) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Dec_29", "total_male_vax_Dec_29", "total_female_vax_Dec_29", "total_masian_vax_Dec_29", "total_mblack_vax_Dec_29", "total_morace_vax_Dec_29", "total_mwhite_vax_Dec_29", "total_fasian_vax_Dec_29", "total_fblack_vax_Dec_29", "total_forace_vax_Dec_29", "total_fwhite_vax_Dec_29", "total_asian_vax_Dec_29","total_black_vax_Dec_29", "total_orace_vax_Dec_29", "total_white_vax_Dec_29", "total_05_09_vax_Dec_29", "total_10_17_vax_Dec_29", "total_18_44_vax_Dec_29", "total_45_64_vax_Dec_29", "total_65Plus_vax_Dec_29") 

#change column names for 31705 Dec  
colnames(Zip_31705_Dec) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Dec_29", "total_male_vax_Dec_29", "total_female_vax_Dec_29", "total_masian_vax_Dec_29", "total_mblack_vax_Dec_29", "total_morace_vax_Dec_29", "total_mwhite_vax_Dec_29", "total_fasian_vax_Dec_29", "total_fblack_vax_Dec_29", "total_forace_vax_Dec_29", "total_fwhite_vax_Dec_29", "total_asian_vax_Dec_29","total_black_vax_Dec_29", "total_orace_vax_Dec_29", "total_white_vax_Dec_29", "total_05_09_vax_Dec_29", "total_10_17_vax_Dec_29", "total_18_44_vax_Dec_29", "total_45_64_vax_Dec_29", "total_65Plus_vax_Dec_29") 

#change column names for 31707 Dec  
colnames(Zip_31707_Dec) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Dec_29", "total_male_vax_Dec_29", "total_female_vax_Dec_29", "total_masian_vax_Dec_29", "total_mblack_vax_Dec_29", "total_morace_vax_Dec_29", "total_mwhite_vax_Dec_29", "total_fasian_vax_Dec_29", "total_fblack_vax_Dec_29", "total_forace_vax_Dec_29", "total_fwhite_vax_Dec_29", "total_asian_vax_Dec_29","total_black_vax_Dec_29", "total_orace_vax_Dec_29", "total_white_vax_Dec_29", "total_05_09_vax_Dec_29", "total_10_17_vax_Dec_29", "total_18_44_vax_Dec_29", "total_45_64_vax_Dec_29", "total_65Plus_vax_Dec_29") 

```

# Cleaning is done, now lets save the processed data

### Deleting excess environment objects and saving data as processed_data_Dec

```{r}
#Only need to save processed data for the three zip codes
rm(Dougherty_Vax_Dec,Dec_29, codebook, Dougherty_Vax_Dec_sums) 

#saving clean data for 31701 to processed_data folder
save_data_location = here("data", "processed_data","Zip_31701", "processed_data_31701_Dec.rds")

saveRDS(Zip_31701_Dec, file = save_data_location)

#saving clean data for 31705 to processed_data folder
save_data_location2 = here("data", "processed_data", "Zip_31705", "processed_data_31705_Dec.rds")

saveRDS(Zip_31705_Dec, file = save_data_location2)

#saving clean data for 31707 to processed_data folder
save_data_location3 = here("data", "processed_data", "Zip_31707", "processed_data_31707_Dec.rds")

saveRDS(Zip_31707_Dec, file = save_data_location3)

```

# Processing script 5

Load needed packages. make sure they are installed.

```{r}
library(here)
library(readxl) #for loading Excel files
library(dplyr) #for data processing/cleaning
library(tidyr) #for data processing/cleaning
```

## Raw Data & Codebook loading

```{r}
# Loading the rawdata containing GA residents with at least one dose of the Covid-19 vaccine
rawdata_location = here("data","raw_data","Jan_26.xlsx")
Jan_26 <- read_excel(rawdata_location)


#loading data code book for reference 
codebook_location = here("data","raw_data","Codebook.xlsx")
codebook = read_excel(codebook_location)
```

## Summary of data

```{r}
glimpse(Jan_26)
```

## Cleaning

### Separating the data by zip code and removing negative values

```{r}
#I am only interested in Covid-19 Vaccination from Dougherty County which contains the target zip codes of 31701, 31705 and 31707
#by using filter() I am able to create a new dataset with vaccinations from Dougherty County 
Dougherty_Vax_Jan <- filter(Jan_26, COUNTY_NAME == "Dougherty County")  

#replacing negative values with 0
Dougherty_Vax_Jan [Dougherty_Vax_Jan < 0] <- 0  
```

### Adding new columns: total vax sum, total vax of all males, total vax of all females

```{r}
#Adding a column of the total vax for each census tract (for each observation)  
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>% mutate(total_vax_Jan = sum(across(ends_with("VAX")), na.rm = T))  

#total vax column for all males
Dougherty_Vax_Jan <- Dougherty_Vax_Jan  %>% rowwise() %>%   
  mutate(total_male_vax = sum(across(starts_with("M") & ends_with("VAX")), na.rm = T)) 

#total vax column for all females
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>%   
  mutate(total_female_vax = sum(across(starts_with("F") & ends_with("VAX")), na.rm = T))

```

### Adding new columns for Male Residents by race

```{r}
#total vax column for Asian male residents 
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>%   
  mutate(total_masian_vax = sum(across(starts_with("MAsianNHPI") & ends_with("VAX")), na.rm = T))

#total vax column for African American male residents
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>%   
  mutate(total_mblack_vax = sum(across(starts_with("MBlack") & ends_with("VAX")), na.rm = T))

#total vax column for other race male residents
Dougherty_Vax_Jan<- Dougherty_Vax_Jan %>% rowwise() %>%   
  mutate(total_morace_vax = sum(across(starts_with("MOtherRace") & ends_with("VAX")), na.rm = T))  

#total vax column for White male residents 
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>%   
  mutate(total_mwhite_vax = sum(across(starts_with("MWhite") & ends_with("VAX")), na.rm = T))

```

### Adding new columns for Female Residents by race

```{r}
#total vax column for Asian female residents    
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>%   
  mutate(total_fasian_vax = sum(across(starts_with("FAsianNHPI") & ends_with("VAX")), na.rm = T))  

#total vax column for African American female residents
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>%   
  mutate(total_fblack_vax = sum(across(starts_with("FBlack") & ends_with("VAX")), na.rm = T))  

#total vax column for other race female residents
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>%   
  mutate(total_forace_vax = sum(across(starts_with("FOtherRace") & ends_with("VAX")), na.rm = T))  

#total vax column for White female residents 
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>%   
  mutate(total_fwhite_vax = sum(across(starts_with("FWhite") & ends_with("VAX")), na.rm = T))  
```

### Adding new columns for Vax totals by race

Note that these columns are different than the previous columns because here I am summing the total amount of resident vaccinations by adding all males and females of a specific race to get the the overall amount of resident vaccinations by race.

For example(see below): I get the total Asian resident vaccinations by summing male Asian residents + female Asain residents.

```{r}
#Vax total Asian Residents
Dougherty_Vax_Jan$total_asian_vax <- Dougherty_Vax_Jan$total_masian_vax + Dougherty_Vax_Jan$total_fasian_vax

#Vax total for African American Residents 
Dougherty_Vax_Jan$total_black_vax <- Dougherty_Vax_Jan$total_mblack_vax + Dougherty_Vax_Jan$total_fblack_vax  

#Vax total for Other Race Residents
Dougherty_Vax_Jan$total_orace_vax <- Dougherty_Vax_Jan$total_morace_vax + Dougherty_Vax_Jan$total_forace_vax  

#Vax total for White Residents
Dougherty_Vax_Jan$total_white_vax <- Dougherty_Vax_Jan$total_mwhite_vax + Dougherty_Vax_Jan$total_fwhite_vax  
```

### Adding new columns for Vax totals by age ranges: 05-09, 10-17, 18-44, 45-64, 65+

```{r}
#summing all residents in the age range of 05-09
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>% mutate(total_05_09_vax = sum(FAsianNHPI_05_09_VAX, MAsianNHPI_05_09_VAX, UAsianNHPI_05_09_VAX,FBlack_05_09_VAX, MBlack_05_09_VAX, UBlack_05_09_VAX,FNone_05_09_VAX, MNone_05_09_VAX, UNone_05_09_VAX,FOtherRace_05_09_VAX, MOtherRace_05_09_VAX, UOtherRace_05_09_VAX,FWhite_05_09_VAX, MWhite_05_09_VAX, UWhite_05_09_VAX, na.rm = T))  

#summing all residents in the age range of 10-17
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>% mutate(total_10_17_vax = sum(FAsianNHPI_10_17_VAX, MAsianNHPI_10_17_VAX, UAsianNHPI_10_17_VAX,FBlack_10_17_VAX, MBlack_10_17_VAX, UBlack_10_17_VAX,FNone_10_17_VAX, MNone_10_17_VAX, UNone_10_17_VAX,FOtherRace_10_17_VAX, MOtherRace_10_17_VAX, UOtherRace_10_17_VAX,FWhite_10_17_VAX, MWhite_10_17_VAX, UWhite_10_17_VAX, na.rm = T))  

#summing all residents in the age range of 18-44
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>% mutate(total_18_44_vax = sum(FAsianNHPI_18_44_VAX, MAsianNHPI_18_44_VAX, UAsianNHPI_18_44_VAX,FBlack_18_44_VAX, MBlack_18_44_VAX, UBlack_18_44_VAX,FNone_18_44_VAX, MNone_18_44_VAX, UNone_18_44_VAX,FOtherRace_18_44_VAX, MOtherRace_18_44_VAX, UOtherRace_18_44_VAX,FWhite_18_44_VAX, MWhite_18_44_VAX, UWhite_18_44_VAX, na.rm = T))  

#summing all residents in the age range of 45-64
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>% mutate(total_45_64_vax = sum(FAsianNHPI_45_64_VAX, MAsianNHPI_45_64_VAX, UAsianNHPI_45_64_VAX,FBlack_45_64_VAX, MBlack_45_64_VAX, UBlack_45_64_VAX,FNone_45_64_VAX, MNone_45_64_VAX, UNone_45_64_VAX,FOtherRace_45_64_VAX, MOtherRace_45_64_VAX, UOtherRace_45_64_VAX,FWhite_45_64_VAX, MWhite_45_64_VAX, UWhite_45_64_VAX, na.rm = T))  

#summing all residents in the age range of 65+ 
Dougherty_Vax_Jan <- Dougherty_Vax_Jan %>% rowwise() %>% mutate(total_65Plus_vax = sum(FAsianNHPI_65Plus_VAX, MAsianNHPI_65Plus_VAX, UAsianNHPI_65Plus_VAX,FBlack_65Plus_VAX, MBlack_65Plus_VAX, UBlack_65Plus_VAX,FNone_65Plus_VAX, MNone_65Plus_VAX, UNone_65Plus_VAX,FOtherRace_65Plus_VAX, MOtherRace_65Plus_VAX, UOtherRace_65Plus_VAX,FWhite_65Plus_VAX, MWhite_65Plus_VAX, UWhite_65Plus_VAX, na.rm = T))  

```

### Creating a data set with only the sums columns I just created via the previous code

```{r}
#Extract necessary variables only  
Dougherty_Vax_Jan_sums <- Dougherty_Vax_Jan[,c(1:4,185:204)]  
```

### Filtering the data by zip code and creating a

```{r}
#filtering data by zip: 31701  
#All of the following FIPS or census tracts correspond to the 31701 zip code
Zip_31701_Jan <-filter(Dougherty_Vax_Jan_sums,FIPS=="13095000700" | FIPS=="13095000800" | FIPS=="13095001403" | FIPS=="13095001500" | FIPS=="13095010601" | FIPS=="13095011300" | FIPS=="13095011400" | FIPS=="13095010602")  

#filtering data by zip: 31705  
#All of the following FIPS or census tracts correspond to the 31705 zip code
Zip_31705_Jan <- filter(Dougherty_Vax_Jan_sums, FIPS=="13095000100" | FIPS=="13095000200" | FIPS=="13095010302" | FIPS=="13095010700" | FIPS=="13095010900" | FIPS=="13095011000" | FIPS=="13095011200" | FIPS=="13095011600")  

#filtering data by zip: 31707  
#All of the following FIPS or census tracts correspond to the 31707 zip code
Zip_31707_Jan <- filter(Dougherty_Vax_Jan_sums, FIPS=="13095000400" | FIPS=="13095000501" | FIPS=="13095000502" | FIPS=="13095000600" | FIPS=="13095000900" | FIPS=="13095001000" | FIPS=="13095001100")  

```

### Change the column names for 31701 Jan

```{r}
colnames(Zip_31701_Jan) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Jan_26", "total_male_vax_Jan_26", "total_female_vax_Jan_26", "total_masian_vax_Jan_26", "total_mblack_vax_Jan_26", "total_morace_vax_Jan_26", "total_mwhite_vax_Jan_26", "total_fasian_vax_Jan_26", "total_fblack_vax_Jan_26", "total_forace_vax_Jan_26", "total_fwhite_vax_Jan_26", "total_asian_vax_Jan_26","total_black_vax_Jan_26", "total_orace_vax_Jan_26", "total_white_vax_Jan_26", "total_05_09_vax_Jan_26", "total_10_17_vax_Jan_26", "total_18_44_vax_Jan_26", "total_45_64_vax_Jan_26", "total_65Plus_vax_Jan_26") 

#change column names for 31705 Jan  
colnames(Zip_31705_Jan) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Jan_26", "total_male_vax_Jan_26", "total_female_vax_Jan_26", "total_masian_vax_Jan_26", "total_mblack_vax_Jan_26", "total_morace_vax_Jan_26", "total_mwhite_vax_Jan_26", "total_fasian_vax_Jan_26", "total_fblack_vax_Jan_26", "total_forace_vax_Jan_26", "total_fwhite_vax_Jan_26", "total_asian_vax_Jan_26","total_black_vax_Jan_26", "total_orace_vax_Jan_26", "total_white_vax_Jan_26", "total_05_09_vax_Jan_26", "total_10_17_vax_Jan_26", "total_18_44_vax_Jan_26", "total_45_64_vax_Jan_26", "total_65Plus_vax_Jan_26") 

#change column names for 31707 Jan  
colnames(Zip_31707_Jan) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Jan_26", "total_male_vax_Jan_26", "total_female_vax_Jan_26", "total_masian_vax_Jan_26", "total_mblack_vax_Jan_26", "total_morace_vax_Jan_26", "total_mwhite_vax_Jan_26", "total_fasian_vax_Jan_26", "total_fblack_vax_Jan_26", "total_forace_vax_Jan_26", "total_fwhite_vax_Jan_26", "total_asian_vax_Jan_26","total_black_vax_Jan_26", "total_orace_vax_Jan_26", "total_white_vax_Jan_26", "total_05_09_vax_Jan_26", "total_10_17_vax_Jan_26", "total_18_44_vax_Jan_26", "total_45_64_vax_Jan_26", "total_65Plus_vax_Jan_26") 

```

# Cleaning is done, now lets save the processed data

### Deleting excess environment objects and saving data as processed_data_Jan

```{r}
#Only need to save processed data for the three zip codes
rm(Dougherty_Vax_Jan,Jan_26, codebook, Dougherty_Vax_Jan_sums) 

#saving clean data for 31701 to processed_data folder
save_data_location = here("data", "processed_data","Zip_31701", "processed_data_31701_Jan.rds")

saveRDS(Zip_31701_Jan, file = save_data_location)

#saving clean data for 31705 to processed_data folder
save_data_location2 = here("data", "processed_data", "Zip_31705", "processed_data_31705_Jan.rds")

saveRDS(Zip_31705_Jan, file = save_data_location2)

#saving clean data for 31707 to processed_data folder
save_data_location3 = here("data", "processed_data", "Zip_31707", "processed_data_31707_Jan.rds")

saveRDS(Zip_31707_Jan, file = save_data_location3)

```

# Processing 6

Load needed packages. make sure they are installed.

```{r}
library(here)
library(readxl) #for loading Excel files
library(dplyr) #for data processing/cleaning
library(tidyr) #for data processing/cleaning
```

## Raw Data & Codebook loading

```{r}
# Loading the rawdata containing GA residents with at least one dose of the Covid-19 vaccine
rawdata_location = here("data","raw_data","Feb_26.xlsx")
Feb_26 <- read_excel(rawdata_location)


#loading data code book for reference 
codebook_location = here("data","raw_data","Codebook.xlsx")
codebook = read_excel(codebook_location)
```

## Summary of data

```{r}
glimpse(Feb_26)
```

## Cleaning

### Separating the data by zip code and removing negative values

```{r}
#I am only interested in Covid-19 Vaccination from Dougherty County which contains the target zip codes of 31701, 31705 and 31707
#by using filter() I am able to create a new dataset with vaccinations from Dougherty County 
Dougherty_Vax_Feb <- filter(Feb_26, COUNTY_NAME == "Dougherty County")  

#replacing negative values with 0
Dougherty_Vax_Feb [Dougherty_Vax_Feb < 0] <- 0  
```

### Adding new columns: total vax sum, total vax of all males, total vax of all females

```{r}
#Adding a column of the total vax for each census tract (for each observation)  
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>% mutate(total_vax_Feb = sum(across(ends_with("VAX")), na.rm = T))  

#total vax column for all males
Dougherty_Vax_Feb <- Dougherty_Vax_Feb  %>% rowwise() %>%   
  mutate(total_male_vax = sum(across(starts_with("M") & ends_with("VAX")), na.rm = T)) 

#total vax column for all females
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>%   
  mutate(total_female_vax = sum(across(starts_with("F") & ends_with("VAX")), na.rm = T))

```

### Adding new columns for Male Residents by race

```{r}
#total vax column for Asian male residents 
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>%   
  mutate(total_masian_vax = sum(across(starts_with("MAsianNHPI") & ends_with("VAX")), na.rm = T))

#total vax column for African American male residents
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>%   
  mutate(total_mblack_vax = sum(across(starts_with("MBlack") & ends_with("VAX")), na.rm = T))

#total vax column for other race male residents
Dougherty_Vax_Feb<- Dougherty_Vax_Feb %>% rowwise() %>%   
  mutate(total_morace_vax = sum(across(starts_with("MOtherRace") & ends_with("VAX")), na.rm = T))  

#total vax column for White male residents 
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>%   
  mutate(total_mwhite_vax = sum(across(starts_with("MWhite") & ends_with("VAX")), na.rm = T))

```

### Adding new columns for Female Residents by race

```{r}
#total vax column for Asian female residents    
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>%   
  mutate(total_fasian_vax = sum(across(starts_with("FAsianNHPI") & ends_with("VAX")), na.rm = T))  

#total vax column for African American female residents
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>%   
  mutate(total_fblack_vax = sum(across(starts_with("FBlack") & ends_with("VAX")), na.rm = T))  

#total vax column for other race female residents
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>%   
  mutate(total_forace_vax = sum(across(starts_with("FOtherRace") & ends_with("VAX")), na.rm = T))  

#total vax column for White female residents 
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>%   
  mutate(total_fwhite_vax = sum(across(starts_with("FWhite") & ends_with("VAX")), na.rm = T))  
```

### Adding new columns for Vax totals by race

Note that these columns are different than the previous columns because here I am summing the total amount of resident vaccinations by adding all males and females of a specific race to get the the overall amount of resident vaccinations by race.

For example(see below): I get the total Asian resident vaccinations by summing male Asian residents + female Asain residents.

```{r}
#Vax total Asian Residents
Dougherty_Vax_Feb$total_asian_vax <- Dougherty_Vax_Feb$total_masian_vax + Dougherty_Vax_Feb$total_fasian_vax

#Vax total for African American Residents 
Dougherty_Vax_Feb$total_black_vax <- Dougherty_Vax_Feb$total_mblack_vax + Dougherty_Vax_Feb$total_fblack_vax  

#Vax total for Other Race Residents
Dougherty_Vax_Feb$total_orace_vax <- Dougherty_Vax_Feb$total_morace_vax + Dougherty_Vax_Feb$total_forace_vax  

#Vax total for White Residents
Dougherty_Vax_Feb$total_white_vax <- Dougherty_Vax_Feb$total_mwhite_vax + Dougherty_Vax_Feb$total_fwhite_vax  
```

### Adding new columns for Vax totals by age ranges: 05-09, 10-17, 18-44, 45-64, 65+

```{r}
#summing all residents in the age range of 05-09
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>% mutate(total_05_09_vax = sum(FAsianNHPI_05_09_VAX, MAsianNHPI_05_09_VAX, UAsianNHPI_05_09_VAX,FBlack_05_09_VAX, MBlack_05_09_VAX, UBlack_05_09_VAX,FNone_05_09_VAX, MNone_05_09_VAX, UNone_05_09_VAX,FOtherRace_05_09_VAX, MOtherRace_05_09_VAX, UOtherRace_05_09_VAX,FWhite_05_09_VAX, MWhite_05_09_VAX, UWhite_05_09_VAX, na.rm = T))  

#summing all residents in the age range of 10-17
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>% mutate(total_10_17_vax = sum(FAsianNHPI_10_17_VAX, MAsianNHPI_10_17_VAX, UAsianNHPI_10_17_VAX,FBlack_10_17_VAX, MBlack_10_17_VAX, UBlack_10_17_VAX,FNone_10_17_VAX, MNone_10_17_VAX, UNone_10_17_VAX,FOtherRace_10_17_VAX, MOtherRace_10_17_VAX, UOtherRace_10_17_VAX,FWhite_10_17_VAX, MWhite_10_17_VAX, UWhite_10_17_VAX, na.rm = T))  

#summing all residents in the age range of 18-44
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>% mutate(total_18_44_vax = sum(FAsianNHPI_18_44_VAX, MAsianNHPI_18_44_VAX, UAsianNHPI_18_44_VAX,FBlack_18_44_VAX, MBlack_18_44_VAX, UBlack_18_44_VAX,FNone_18_44_VAX, MNone_18_44_VAX, UNone_18_44_VAX,FOtherRace_18_44_VAX, MOtherRace_18_44_VAX, UOtherRace_18_44_VAX,FWhite_18_44_VAX, MWhite_18_44_VAX, UWhite_18_44_VAX, na.rm = T))  

#summing all residents in the age range of 45-64
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>% mutate(total_45_64_vax = sum(FAsianNHPI_45_64_VAX, MAsianNHPI_45_64_VAX, UAsianNHPI_45_64_VAX,FBlack_45_64_VAX, MBlack_45_64_VAX, UBlack_45_64_VAX,FNone_45_64_VAX, MNone_45_64_VAX, UNone_45_64_VAX,FOtherRace_45_64_VAX, MOtherRace_45_64_VAX, UOtherRace_45_64_VAX,FWhite_45_64_VAX, MWhite_45_64_VAX, UWhite_45_64_VAX, na.rm = T))  

#summing all residents in the age range of 65+ 
Dougherty_Vax_Feb <- Dougherty_Vax_Feb %>% rowwise() %>% mutate(total_65Plus_vax = sum(FAsianNHPI_65Plus_VAX, MAsianNHPI_65Plus_VAX, UAsianNHPI_65Plus_VAX,FBlack_65Plus_VAX, MBlack_65Plus_VAX, UBlack_65Plus_VAX,FNone_65Plus_VAX, MNone_65Plus_VAX, UNone_65Plus_VAX,FOtherRace_65Plus_VAX, MOtherRace_65Plus_VAX, UOtherRace_65Plus_VAX,FWhite_65Plus_VAX, MWhite_65Plus_VAX, UWhite_65Plus_VAX, na.rm = T))  

```

### Creating a data set with only the sums columns I just created via the previous code

```{r}
#Extract necessary variables only  
Dougherty_Vax_Feb_sums <- Dougherty_Vax_Feb[,c(1:4,185:204)]  
```

### Filtering the data by zip code and creating a

```{r}
#filtering data by zip: 31701  
#All of the following FIPS or census tracts correspond to the 31701 zip code
Zip_31701_Feb <-filter(Dougherty_Vax_Feb_sums,FIPS=="13095000700" | FIPS=="13095000800" | FIPS=="13095001403" | FIPS=="13095001500" | FIPS=="13095010601" | FIPS=="13095011300" | FIPS=="13095011400" | FIPS=="13095010602")  

#filtering data by zip: 31705  
#All of the following FIPS or census tracts correspond to the 31705 zip code
Zip_31705_Feb <- filter(Dougherty_Vax_Feb_sums, FIPS=="13095000100" | FIPS=="13095000200" | FIPS=="13095010302" | FIPS=="13095010700" | FIPS=="13095010900" | FIPS=="13095011000" | FIPS=="13095011200" | FIPS=="13095011600")  

#filtering data by zip: 31707  
#All of the following FIPS or census tracts correspond to the 31707 zip code
Zip_31707_Feb <- filter(Dougherty_Vax_Feb_sums, FIPS=="13095000400" | FIPS=="13095000501" | FIPS=="13095000502" | FIPS=="13095000600" | FIPS=="13095000900" | FIPS=="13095001000" | FIPS=="13095001100")  

```

### Change the column names for 31701 Feb

```{r}
colnames(Zip_31701_Feb) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Feb_26", "total_male_vax_Feb_26", "total_female_vax_Feb_26", "total_masian_vax_Feb_26", "total_mblack_vax_Feb_26", "total_morace_vax_Feb_26", "total_mwhite_vax_Feb_26", "total_fasian_vax_Feb_26", "total_fblack_vax_Feb_26", "total_forace_vax_Feb_26", "total_fwhite_vax_Feb_26", "total_asian_vax_Feb_26","total_black_vax_Feb_26", "total_orace_vax_Feb_26", "total_white_vax_Feb_26", "total_05_09_vax_Feb_26", "total_10_17_vax_Feb_26", "total_18_44_vax_Feb_26", "total_45_64_vax_Feb_26", "total_65Plus_vax_Feb_26") 

#change column names for 31705 Feb  
colnames(Zip_31705_Feb) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Feb_26", "total_male_vax_Feb_26", "total_female_vax_Feb_26", "total_masian_vax_Feb_26", "total_mblack_vax_Feb_26", "total_morace_vax_Feb_26", "total_mwhite_vax_Feb_26", "total_fasian_vax_Feb_26", "total_fblack_vax_Feb_26", "total_forace_vax_Feb_26", "total_fwhite_vax_Feb_26", "total_asian_vax_Feb_26","total_black_vax_Feb_26", "total_orace_vax_Feb_26", "total_white_vax_Feb_26", "total_05_09_vax_Feb_26", "total_10_17_vax_Feb_26", "total_18_44_vax_Feb_26", "total_45_64_vax_Feb_26", "total_65Plus_vax_Feb_26") 

#change column names for 31707 Feb  
colnames(Zip_31707_Feb) <- c("FIPS", "GEONAME", "COUNTY_ID", "COUNTY_NAME", "total_vax_Feb_26", "total_male_vax_Feb_26", "total_female_vax_Feb_26", "total_masian_vax_Feb_26", "total_mblack_vax_Feb_26", "total_morace_vax_Feb_26", "total_mwhite_vax_Feb_26", "total_fasian_vax_Feb_26", "total_fblack_vax_Feb_26", "total_forace_vax_Feb_26", "total_fwhite_vax_Feb_26", "total_asian_vax_Feb_26","total_black_vax_Feb_26", "total_orace_vax_Feb_26", "total_white_vax_Feb_26", "total_05_09_vax_Feb_26", "total_10_17_vax_Feb_26", "total_18_44_vax_Feb_26", "total_45_64_vax_Feb_26", "total_65Plus_vax_Feb_26") 

```

# Cleaning is done, now lets save the processed data

### Deleting excess environment objects and saving data as processed_data_Feb

```{r}
#Only need to save processed data for the three zip codes
rm(Dougherty_Vax_Feb,Feb_26, codebook, Dougherty_Vax_Feb_sums) 

#saving clean data for 31701 to processed_data folder
save_data_location = here("data", "processed_data","Zip_31701", "processed_data_31701_Feb.rds")

saveRDS(Zip_31701_Feb, file = save_data_location)

#saving clean data for 31705 to processed_data folder
save_data_location2 = here("data", "processed_data", "Zip_31705", "processed_data_31705_Feb.rds")

saveRDS(Zip_31705_Feb, file = save_data_location2)

#saving clean data for 31707 to processed_data folder
save_data_location3 = here("data", "processed_data", "Zip_31707", "processed_data_31707_Feb.rds")

saveRDS(Zip_31707_Feb, file = save_data_location3)

```
